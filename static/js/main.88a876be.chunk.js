(this["webpackJsonpaccordion-filter"]=this["webpackJsonpaccordion-filter"]||[]).push([[0],{65:function(e,t,r){e.exports=r(94)},70:function(e,t,r){},94:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(10),o=r.n(c),i=(r(70),r(12)),l=r(26);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){var r=a.a.createContext(e);return{Context:r,ContextProvider:function(n){var c=n.children,o=t,i=e,u=a.a.useReducer(o,i),p=Object(l.a)(u,2),d=p[0],f=p[1];return a.a.createElement(r.Provider,{value:s({},d,{dispatch:f})},c)}}}var d=r(7),f=r.n(d),m=function(e){var t="";return f.a.map(e,(function(e){f.a.map(e,(function(e){var r=e.group,n=e.name,a=e.checked;return t+=a?"".concat(r,"=").concat(n,"&"):""}))})),t},E=r(21),h=r.n(E),O=r(33),y=function(){var e=Object(O.a)(h.a.mark((function e(t){var r,n,a,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.filtersContext,n=t.data,a=r.filters,c=r.touched,o=Object.create(a),r.dispatch({type:"GET_FILTERS"}),f.a.map(n,(function(e){var t=e.providerName,r=e.cloudAccount;void 0===o.providerName[t]?o.providerName[t]={count:0,checked:!1,name:t,group:"providerName"}:o.providerName[t].count++,void 0===o.cloudAccount[r]?o.cloudAccount[r]={count:0,checked:!1,name:r,group:"cloudAccount"}:o.cloudAccount[r].count++})),console.log(a,o),e.prev=6,c){e.next=12;break}console.log("aici"),r.dispatch({type:"GET_FILTERS_SUCCESS",payload:o}),e.next=13;break;case 12:throw new Error("Filters already initialized");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),f.a.get(e.t0,"message"),r.dispatch({type:"GET_FILTERS_FAIL"});case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.filtersContext,r=e.fetchFunction,n=e.name,a=e.group,c=e.value,o=t.filters;t.dispatch({type:"CHANGE_FILTERS"});try{o[a][n].checked=c,t.dispatch({type:"CHANGE_FILTERS_SUCCESS",payload:o}),r&&r(o)}catch(i){f.a.get(i,"message");t.dispatch({type:"CHANGE_FILTERS_FAIL"})}},b=function(e){var t=e.filtersContext,r=e.fetchFunction,n=e.group,a=e.value,c=t.filters;t.dispatch({type:"CHANGE_FILTERS"});try{f.a.map(c[n],(function(e,t){c[n][t].checked=a})),t.dispatch({type:"CHANGE_FILTERS_SUCCESS",payload:c}),r&&r(c)}catch(o){f.a.get(o,"message");t.dispatch({type:"CHANGE_FILTERS_FAIL"})}};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=p({filters:{providerName:{},cloudAccount:{}},touched:!1,loading:!1,error:void 0},(function(e,t){switch(t.type){case"GET_FILTERS":return j({},e,{loading:!0});case"GET_FILTERS_SUCCESS":return j({},e,{loading:!1,touched:!0,filters:t.payload});case"GET_FILTERS_FAIL":return j({},e,{loading:!1,error:t.payload});case"CHANGE_FILTERS":return j({},e);case"CHANGE_FILTERS_SUCCESS":return j({},e,{filters:t.payload});case"CHANGE_FILTERS_FAIL":return j({},e,{error:t.payload});default:return e}})),C=S.Context,w=S.ContextProvider,_=C,x=w,F=r(42),T=r.n(F),P="https://my-json-server.typicode.com/gceico/accordion-filter",I=function(){var e=Object(O.a)(h.a.mark((function e(t){var r,n,a,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.historyContext,n=t.filters,a=m(n),r.dispatch({type:"GET_HISTORY"}),e.prev=3,e.next=6,T()({url:"".concat(P,"/history?").concat(a),method:"get"});case 6:c=e.sent,r.dispatch({type:"GET_HISTORY_SUCCESS",payload:c.data}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),o=f.a.get(e.t0,"response.data.errors"),r.dispatch({type:"GET_HISTORY_FAIL",payload:o});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(O.a)(h.a.mark((function e(t){var r,n,a,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.historyContext,n=t.id,a=r.history,r.dispatch({type:"DELETE_HISTORY"}),e.prev=3,e.next=6,T()({url:"".concat(P,"/history/").concat(n),method:"delete"});case 6:e.sent,c=f.a.filter(a,(function(e){return e.id!==n})),r.dispatch({type:"DELETE_HISTORY_SUCCESS",payload:c}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),o=f.a.get(e.t0,"response.data.errors"),r.dispatch({type:"DELETE_HISTORY_FAIL",payload:o});case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=p({history:[],deleted:{},loading:!1,error:void 0},(function(e,t){switch(t.type){case"GET_HISTORY":return L({},e,{loading:!0});case"GET_HISTORY_SUCCESS":return L({},e,{history:t.payload,loading:!1});case"GET_HISTORY_FAIL":return L({},e,{loading:!1,error:t.payload});case"DELETE_HISTORY":return L({},e,{loading:!0});case"DELETE_HISTORY_SUCCESS":return L({},e,{loading:!1});case"DELETE_HISTORY_FAIL":return L({},e,{loading:!1,error:t.payload});default:return e}})),N=R.Context,D=R.ContextProvider,H=N,G=D,Y=r(133),U=r(134),B=r(135),z=r(136),J=r(137),W=r(138),q=r(95),$=r(129),K=r(141),M=r(128),Q=r(96),V=r(130),X=r(140),Z=r(131),ee=r(139),te=r(132),re=r(123);function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce=Object(re.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(16),alignSelf:"center"},groupCheckbox:{marginLeft:"auto"},groupExpansion:{flexDirection:"column"},toggleButton:{width:"fit-content"},searchField:{width:200,margin:0}}})),oe={filterProvider:!0,filterAccount:!0};function ie(e){var t=e.data,r=e.fetchFunction,c=Object(n.useState)(oe),o=Object(l.a)(c,2),u=o[0],s=o[1],p=Object(n.useContext)(_),d=(p.loading,p.filters),f=d.providerName,m=d.cloudAccount;Object(n.useEffect)((function(){y({filtersContext:p,data:t})}),[t]);var E=function(e){return function(t,r){s(ae({},u,r?Object(i.a)({},e,!0):Object(i.a)({},e,!1)))}};return a.a.createElement(a.a.Fragment,null,a.a.createElement(K.a,{expanded:u.filterProvider,onChange:E("filterProvider")},a.a.createElement(le,{group:f,groupName:"providerName",fetchFunction:r})),a.a.createElement(K.a,{expanded:u.filterAccount,onChange:E("filterAccount")},a.a.createElement(le,{group:m,groupName:"cloudAccount",fetchFunction:r,maxFilters:3,withSearch:!0})))}function le(e){var t=e.group,r=e.groupName,c=e.fetchFunction,o=e.maxFilters,i=e.withSearch,u=ce(),s=Object(n.useState)(o),p=Object(l.a)(s,2),d=p[0],m=p[1],E=Object(n.useState)(""),h=Object(l.a)(E,2),O=(h[0],h[1],Object(n.useState)(t)),y=Object(l.a)(O,2),g=y[0],v=y[1],j=Object(n.useContext)(_),S=(j.filters,!0);f.a.map(t,(function(e){e.checked||(S=!1)}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(M.a,{expandIcon:a.a.createElement($.a,null,"expand_more")},a.a.createElement(Q.a,{className:u.heading},"Cloud provider"),a.a.createElement(V.a,{onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},checked:S,onChange:function(e,t){b({filtersContext:j,group:r,value:t,fetchFunction:c})},className:u.groupCheckbox,control:a.a.createElement(X.a,null),label:"All (".concat(f.a.size(t),")")})),a.a.createElement(Z.a,{className:u.groupExpansion},i&&a.a.createElement(ee.a,{label:"Search filters",type:"search",variant:"outlined",className:u.searchField,margin:"normal",onChange:function(e,r){var n=f.a.get(e,"target.value");v(n?f.a.pickBy(t,(function(e){return f.a.includes(e.name.toLowerCase(),n.toLowerCase())})):t)}}),d?f.a.map(f.a.values(g).slice(0,d),(function(e,t){return a.a.createElement(ue,Object.assign({},e,{fetchFunction:c,key:t}))})):f.a.map(f.a.values(g),(function(e,t){return a.a.createElement(ue,Object.assign({},e,{fetchFunction:c,key:t}))})),o&&a.a.createElement(te.a,{size:"small",className:u.toggleButton,onClick:function(){return m(d?void 0:o)}},"".concat(d?"Show all(".concat(f.a.size(t),")"):"Hide"," "))))}function ue(e){var t=e.count,r=e.checked,c=e.name,o=e.group,i=e.fetchFunction,l=Object(n.useContext)(_);return a.a.createElement(V.a,{control:a.a.createElement(X.a,{checked:r,onChange:function(e,t){g({filtersContext:l,name:c,group:o,value:t,fetchFunction:i})},value:c}),label:"".concat(c," (").concat(t,")")})}function se(){var e=Object(n.useContext)(H),t=Object(n.useContext)(_),r=e.loading,c=e.history,o=t.filters;Object(n.useEffect)((function(){I({historyContext:e,filters:o})}),[]);return r?a.a.createElement("div",null,"loading..."):a.a.createElement(a.a.Fragment,null,a.a.createElement(ie,{data:c,fetchFunction:function(t){return I({historyContext:e,filters:t})}}),a.a.createElement(Y.a,{"aria-label":"simple table"},a.a.createElement(U.a,null,a.a.createElement(B.a,null,a.a.createElement(z.a,null,"Picture"),a.a.createElement(z.a,null,"Provider"),a.a.createElement(z.a,null,"Account"),a.a.createElement(z.a,null,"Region"),a.a.createElement(z.a,null,"Result"),a.a.createElement(z.a,null,"Run By"),a.a.createElement(z.a,null,"Created At"),a.a.createElement(z.a,null,"Finished At"),a.a.createElement(z.a,null,"Name"),a.a.createElement(z.a,null,"Actions"))),a.a.createElement(J.a,null,f.a.map(c,(function(t){return a.a.createElement(B.a,{key:t.id},a.a.createElement(z.a,null,a.a.createElement(W.a,{variant:"square",src:t.picture})),a.a.createElement(z.a,null,t.providerName),a.a.createElement(z.a,null,t.cloudAccount),a.a.createElement(z.a,null,t.region),a.a.createElement(z.a,null,t.result),a.a.createElement(z.a,null,t.runBy),a.a.createElement(z.a,null,t.createdAt),a.a.createElement(z.a,null,t.finishedAt),a.a.createElement(z.a,null,t.name),a.a.createElement(z.a,null,a.a.createElement(q.a,{color:"secondary",component:"span",onClick:function(){return r=t.id,void A({historyContext:e,id:r});var r}},a.a.createElement($.a,null,"delete_forever"))))})))))}var pe=function(){return a.a.createElement(G,null,a.a.createElement(x,null,a.a.createElement(se,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[65,1,2]]]);
//# sourceMappingURL=main.88a876be.chunk.js.map